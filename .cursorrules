{
  "project": {
    "name": "MockyLab Frontend",
    "type": "Next.js",
    "description": "Professional mockup design solution with Printify integration"
  },
  "architecture": {
    "routing": {
      "base": "/src/app",
      "protected_routes": ["/mockup/*", "/printify/*", "/profile/*", "/settings/*"],
      "public_routes": ["/login", "/"],
      "auth_redirect": {
        "default": "/mockup/list",
        "unauthorized": "/login"
      }
    },
    "api": {
      "base_url": "process.env.NEXT_PUBLIC_API_URL || 'https://api.mockylab.com'",
      "endpoints": {
        "auth": {
          "login": "/auth/login",
          "refresh": "/auth/refresh"
        },
        "printify": {
          "blueprints": "/Printify/blueprints",
          "variants": "/Printify/variants",
          "settings": "/Printify/settings"
        },
        "mockups": {
          "base": "/Mockup",
          "design_areas": "/mockups/{mockupId}/design-areas",
          "user": "/UserOfMockup"
        }
      }
    }
  },
  "features": {
    "auth": {
      "token_storage": ["localStorage", "cookies"],
      "token_key": "token",
      "refresh_token_key": "refreshToken",
      "user_key": "user",
      "cookie_options": {
        "token": {
          "expires": "1 day",
          "secure": true,
          "sameSite": "strict"
        },
        "refreshToken": {
          "expires": "7 days",
          "secure": true,
          "sameSite": "strict"
        }
      }
    },
    "printify": {
      "required_settings": ["apiKey", "shopId"],
      "blueprint_flow": [
        "List available blueprints",
        "Select blueprint",
        "Sync variants",
        "Add to user blueprints"
      ]
    },
    "mockup": {
      "creation_flow": [
        "Select blueprint",
        "Configure design areas",
        "Upload designs",
        "Generate mockup"
      ],
      "design_area_calculation": {
        "position": {
          "centerX": "(group.left - imageLeft) / imageScale",
          "centerY": "(group.top - imageTop) / imageScale"
        },
        "dimensions": {
          "width": "rect.getScaledWidth() / imageScale",
          "height": "rect.getScaledHeight() / imageScale"
        },
        "angle": "group.angle"
      },
      "required_fields": [
        "name",
        "category",
        "designColor",
        "designAreas"
      ]
    }
  },
  "conventions": {
    "components": {
      "naming": "PascalCase",
      "location": "/src/components"
    },
    "pages": {
      "naming": "kebab-case",
      "structure": "page.tsx in each route directory"
    },
    "api": {
      "client": "apiClient from @/utils/apiConfig",
      "error_handling": "handleApiError from @/utils/apiConfig"
    },
    "auth": {
      "token_management": {
        "storage": "Dual storage in localStorage and cookies for better security",
        "refresh": "Automatic token refresh on expiration",
        "cleanup": "Complete cleanup on logout (localStorage, cookies, headers)"
      }
    }
  },
  "workflow": {
    "page_development": [
      "Define route and component structure",
      "Implement authentication check",
      "Add API integration",
      "Implement UI components",
      "Add error handling",
      "Test functionality"
    ],
    "auth_flow": [
      "Login with username/password",
      "Store tokens in both localStorage and cookies",
      "Automatic token refresh",
      "Protected route redirection",
      "Clean logout with full cleanup"
    ]
  }
} 